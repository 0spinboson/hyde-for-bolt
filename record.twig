{% extends '_master.twig' %}

{% block content %}
<div class="post">
  <h1 class="post-title">
    {{ record.title }}
  </h1>
  {% block recordinfos %}
  <span class="post-date">
    {% include('_recordinfos.twig') %}
  </span>
  {% endblock recordinfos %}

  {% block recordcontent %}
      {% if record.body %}
        {{ record.body }}
      {% elseif record.content %}
        {{ record.content }}
      {% endif %}

      {% if record.gallery %}
        <div class="thumbs">
        {% for image in record.gallery %}
            {% set fn = image['filename'] %}
            <a  href="{{ image(image) }}">
                <img src="{{ fn|thumbnail('thumb_350w') }}"
                    srcset="{{ fn|thumbnail('thumb_250w') }} 250w,
                    {{ fn|thumbnail('thumb_350w') }} 350w,
                    {{ fn|thumbnail('thumb_450w') }} 450w">
            </a>
        {% endfor %}
        </div>
        <script>
          $('.thumbs a').imageLightbox({
                allowedTypes:   'png|jpg|jpeg|gif',     // string;
                animationSpeed: 250,                    // integer;
                preloadNext:    true,                   // bool;            silently preload the next image
                enableKeyboard: true,                   // bool;            enable keyboard shortcuts (arrows Left/Right and Esc)
                quitOnEnd:      false,                  // bool;            quit after viewing the last image
                quitOnImgClick: false,                  // bool;            quit when the viewed image is clicked
                quitOnDocClick: true,                   // bool;            quit when anything but the viewed image is clicked
                onStart:        function(){overlayOn(); },                  // function/bool;   calls function when the lightbox starts
                onEnd:          function(){overlayOff(); },                 // function/bool;   calls function when the lightbox quits
                onLoadStart:    false,                  // function/bool;   calls function when the image load begins
                onLoadEnd:      false                   // function/bool;   calls function when the image finishes loading
            });
        </script>
      {% endif %}

      {% if record.copyright and record.copyright != "" %}
        <dl class="copyright">
            <dt>Â©</dt>
            <dd>
                {{ record.copyright|markdown }}
            </dd>
        </div>
      {% endif %}
  {% endblock recordcontent %}
</div>


{% set relatedrecords = record.related() %}
{% if relatedrecords is not empty %}
    <div class="related">
      <h2>{{ __('general.phrase.related-content') }}</h2>
      <ul class="related-posts">
        {% for related in relatedrecords %}
          <li>
            <h3>
              <a href="{{ related.link }}">
                {{ related.title }}
                <small>{{ related.datepublish|localedatetime("%d.%m.%Y") }}</small>
              </a>
            </h3>
          </li>
        {% endfor %}
      </ul>
    </div>
{% endif %}



{% endblock content %}
